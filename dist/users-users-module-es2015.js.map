{"version":3,"sources":["./node_modules/rxjs-compat/Subject.js","./node_modules/rxjs/Subject.js","./src/app/pages/users/user/user.component.ts","./src/app/pages/users/user/user.component.html","./src/app/pages/users/users-routing.module.ts","./src/app/pages/users/users.component.ts","./src/app/pages/users/users.module.ts"],"names":[],"mappings":"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","file":"users-users-module-es2015.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar rxjs_1 = require(\"rxjs\");\nexports.Subject = rxjs_1.Subject;\n//# sourceMappingURL=Subject.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"rxjs-compat/Subject\"));\n//# sourceMappingURL=Subject.js.map","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { Subject } from 'rxjs/Subject';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { NbToastrService } from '@nebular/theme';\n\nimport { UserData, User } from '../../../@core/interfaces/common/users';\nimport { EMAIL_PATTERN, NUMBERS_PATTERN } from '../../../@auth/components';\nimport {NbAuthOAuth2JWTToken, NbTokenService} from '@nebular/auth';\nimport {UserStore} from '../../../@core/stores/user.store';\n\nexport enum UserFormMode {\n  VIEW = 'View',\n  EDIT = 'Edit',\n  ADD = 'Add',\n  EDIT_SELF = 'EditSelf',\n}\n\n@Component({\n  selector: 'ngx-user',\n  templateUrl: './user.component.html',\n  styleUrls: ['./user.component.scss'],\n})\nexport class UserComponent implements OnInit, OnDestroy {\n  userForm: FormGroup;\n\n  protected readonly unsubscribe$ = new Subject<void>();\n\n  get firstName() { return this.userForm.get('firstName'); }\n\n  get lastName() { return this.userForm.get('lastName'); }\n\n  get login() { return this.userForm.get('login'); }\n\n  get email() { return this.userForm.get('email'); }\n\n  get age() { return this.userForm.get('age'); }\n\n  get street() { return this.userForm.get('address').get('street'); }\n\n  get city() { return this.userForm.get('address').get('city'); }\n\n  get zipCode() { return this.userForm.get('address').get('zipCode'); }\n\n  mode: UserFormMode;\n  setViewMode(viewMode: UserFormMode) {\n    this.mode = viewMode;\n  }\n\n  constructor(private usersService: UserData,\n              private router: Router,\n              private route: ActivatedRoute,\n              private tokenService: NbTokenService,\n              private userStore: UserStore,\n              private toasterService: NbToastrService,\n              private fb: FormBuilder) {\n  }\n\n  ngOnInit(): void {\n    this.initUserForm();\n    // this.loadUserData();\n  }\n\n  initUserForm() {\n    this.userForm = this.fb.group({\n      id: this.fb.control(''),\n      role: this.fb.control(''),\n      firstName: this.fb.control('', [Validators.minLength(3), Validators.maxLength(20)]),\n      lastName: this.fb.control('', [Validators.minLength(3), Validators.maxLength(20)]),\n      login: this.fb.control('', [Validators.required, Validators.minLength(6), Validators.maxLength(20)]),\n      age: this.fb.control('', [Validators.required, Validators.min(1),\n        Validators.max(120), Validators.pattern(NUMBERS_PATTERN)]),\n      email: this.fb.control('', [\n        Validators.required,\n        Validators.pattern(EMAIL_PATTERN),\n      ]),\n      address: this.fb.group({\n        street: this.fb.control(''),\n        city: this.fb.control(''),\n        zipCode: this.fb.control(''),\n      }),\n    });\n  }\n\n  get canEdit(): boolean {\n    return this.mode !== UserFormMode.VIEW;\n  }\n\n\n  loadUserData() {\n    const id = this.route.snapshot.paramMap.get('id');\n    const isProfile = this.route.snapshot.queryParamMap.get('profile');\n    if (isProfile) {\n      this.setViewMode(UserFormMode.EDIT_SELF);\n      this.loadUser();\n    } else {\n      if (id) {\n        const currentUserId = this.userStore.getUser().id;\n        this.setViewMode(currentUserId.toString() === id ? UserFormMode.EDIT_SELF : UserFormMode.EDIT);\n        this.loadUser(id);\n      } else {\n        this.setViewMode(UserFormMode.ADD);\n      }\n    }\n  }\n\n  loadUser(id?) {\n    const loadUser = this.mode === UserFormMode.EDIT_SELF\n      ? this.usersService.getCurrentUser() : this.usersService.get(id);\n    loadUser\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe((user) => {\n        this.userForm.setValue({\n          id: user.id ? user.id : '',\n          role: user.role ? user.role : '',\n          firstName: user.firstName ? user.firstName : '',\n          lastName: user.lastName ? user.lastName : '',\n          login: user.login ? user.login : '',\n          age: user.age ? user.age : '',\n          email: user.email,\n          address: {\n            street: (user.address && user.address.street) ? user.address.street : '',\n            city: (user.address && user.address.city) ? user.address.city : '',\n            zipCode: (user.address && user.address.zipCode) ? user.address.zipCode : '',\n          },\n        });\n\n        // this is a place for value changes handling\n        // this.userForm.valueChanges.pipe(takeUntil(this.unsubscribe$)).subscribe((value) => {   });\n      });\n  }\n\n\n  convertToUser(value: any): User {\n    const user: User = value;\n    return user;\n  }\n\n  save() {\n    const user: User = this.convertToUser(this.userForm.value);\n\n    let observable = new Observable<User>();\n    if (this.mode === UserFormMode.EDIT_SELF) {\n      this.usersService.updateCurrent(user).subscribe((result: any) => {\n          this.tokenService.set(new NbAuthOAuth2JWTToken(result, 'email', new Date()));\n          this.handleSuccessResponse();\n        },\n        err => {\n          this.handleWrongResponse();\n        });\n    } else {\n      observable = user.id\n        ? this.usersService.update(user)\n        : this.usersService.create(user);\n    }\n\n    observable\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(() => {\n          this.handleSuccessResponse();\n        },\n        err => {\n          this.handleWrongResponse();\n        });\n  }\n\n  handleSuccessResponse() {\n    this.toasterService.success('', `Item ${this.mode === UserFormMode.ADD ? 'created' : 'updated'}!`);\n    this.back();\n  }\n\n  handleWrongResponse() {\n    this.toasterService.danger('', `This email has already taken!`);\n  }\n\n  back() {\n    this.router.navigate(['/pages']);\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n}\n","<!--\n  ~ Copyright (c) Akveo 2019. All Rights Reserved.\n  ~ Licensed under the Single Application / Multi Application License.\n  ~ See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n  -->\n\n<nb-card>\n  <nb-card-header>{{mode}} user</nb-card-header>\n  <nb-card-body>\n    <div [formGroup]=\"userForm\" class=\"container\">\n      <div class=\"form-group\">\n        <label for=\"firstName\">First Name</label>\n        <input nbInput id=\"firstName\" formControlName=\"firstName\"\n               [status]=\"(firstName?.hasError('minlength') || firstName?.hasError('maxlength')) ? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Last Name\">\n        <ngx-validation-message label=\"First Name\"\n                                [showMinLength]=\"firstName?.hasError('minlength')\"\n                                [showMaxLength]=\"firstName?.hasError('maxlength')\" minLength=3\n                                maxLength=20></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"lastName\">Last Name</label>\n        <input nbInput id=\"lastName\" formControlName=\"lastName\"\n               [status]=\"(lastName?.hasError('minlength') || lastName?.hasError('maxlength')) ? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Last Name\">\n        <ngx-validation-message label=\"Last Name\"\n                                [showMinLength]=\"lastName?.hasError('minlength')\"\n                                [showMaxLength]=\"lastName?.hasError('maxlength')\" minLength=3\n                                maxLength=20></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"inputLogin\">Login</label>\n        <input nbInput id=\"inputLogin\" formControlName=\"login\"\n               [status]=\"(login?.errors?.required || login?.hasError('minlength') || login?.hasError('maxlength')) && login.touched ? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Login\">\n        <ngx-validation-message label=\"Login\"\n                                [showMinLength]=\"login?.hasError('minlength')\"\n                                [showMaxLength]=\"login?.hasError('maxlength')\"\n                                [showRequired]=\"login?.errors?.required && login.touched\"\n                                minLength=6\n                                maxLength=20></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"inputAge\">Age</label>\n        <input nbInput id=\"inputAge\" formControlName=\"age\"\n               [status]=\"(age?.errors?.required || age?.errors?.min || age?.errors?.max || age?.hasError('pattern')) && age.touched? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Age\">\n        <ngx-validation-message label=\"Age\"\n                                [showMin]=\"age?.errors?.min && age.touched\"\n                                [showMax]=\"age?.errors?.max && age.touched\"\n                                [showRequired]=\"age?.errors?.required && age.touched\"\n                                [showPattern]=\"age?.hasError('pattern')\" min=1 max=120></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"inputEmail\">Email</label>\n        <input nbInput id=\"inputEmail\" formControlName=\"email\"\n               [status]=\"(email?.errors?.required || email?.hasError('pattern')) && email.touched ? 'danger' : 'primary'\"\n               class=\"form-control\"\n               placeholder=\"Email\">\n        <ngx-validation-message label=\"Email\"\n                                [showPattern]=\"email?.hasError('pattern') && email.touched\"\n                                [showRequired]=\"email?.errors?.required && email.touched\" min=1 max=120></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\" formGroupName=\"address\">\n        <label for=\"inputStreet\">Street</label>\n        <input nbInput class=\"form-control\" id=\"inputStreet\" placeholder=\"Street\" formControlName=\"street\">\n      </div>\n\n      <div class=\"form-group\" formGroupName=\"address\">\n        <label for=\"inputCity\">City</label>\n        <input nbInput class=\"form-control\" id=\"inputCity\" placeholder=\"City\" formControlName=\"city\">\n      </div>\n\n      <div class=\"form-group\" formGroupName=\"address\">\n        <label for=\"inputZipCode\">Zip Code</label>\n        <input nbInput class=\"form-control\" id=\"inputZipCode\" placeholder=\"Zip Code\" formControlName=\"zipCode\">\n      </div>\n    </div>\n  </nb-card-body>\n  <nb-card-footer>\n    <button nbButton status=\"primary\" [disabled]=\"!userForm.valid\" (click)=\"save()\" hero>Submit</button>\n    <button nbButton status=\"info\" (click)=\"back()\" hero>Back</button>\n  </nb-card-footer>\n</nb-card>\n\n","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UsersComponent } from './users.component';\nimport { UserComponent } from './user/user.component';\nimport { AdminGuard } from '../../@auth/admin.guard';\n\nconst routes: Routes = [{\n  path: '',\n  component: UsersComponent,\n  children: [\n    {\n      path: 'edit/:id',\n      canActivate: [AdminGuard],\n      component: UserComponent,\n    },\n    {\n      path: 'current',\n      component: UserComponent,\n    },\n    {\n      path: 'add',\n      canActivate: [AdminGuard],\n      component: UserComponent,\n    },\n  ],\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UsersRoutingModule {\n\n}\n","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { Component } from '@angular/core';\n\n\n@Component({\n  selector: 'ngx-users',\n  template: `\n    <router-outlet></router-outlet>\n  `,\n})\nexport class UsersComponent {\n\n}\n","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { Ng2SmartTableModule } from 'ng2-smart-table';\n\nimport { ThemeModule } from '../../@theme/theme.module';\nimport { UsersRoutingModule } from './users-routing.module';\nimport { AuthModule } from '../../@auth/auth.module';\n\n// components\nimport { UsersComponent } from './users.component';\nimport { UserComponent } from './user/user.component';\nimport { ComponentsModule } from '../../@components/components.module';\n// components\n\nimport {\n  NbActionsModule,\n  NbButtonModule,\n  NbCardModule,\n  NbInputModule,\n  NbTabsetModule,\n  NbUserModule,\n  NbRadioModule,\n  NbSelectModule,\n  NbListModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbDatepickerModule,\n} from '@nebular/theme';\n\nconst  NB_MODULES = [\n  NbActionsModule,\n  NbButtonModule,\n  NbCardModule,\n  NbInputModule,\n  NbTabsetModule,\n  NbUserModule,\n  NbRadioModule,\n  NbSelectModule,\n  NbListModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbDatepickerModule,\n  NbInputModule,\n];\n\n@NgModule({\n  imports: [\n    ThemeModule,\n    AuthModule,\n    Ng2SmartTableModule,\n    UsersRoutingModule,\n    ComponentsModule,\n    ReactiveFormsModule,\n    ...NB_MODULES,\n  ],\n  declarations: [\n    UsersComponent,\n    UserComponent,\n  ],\n  entryComponents: [\n  ],\n  providers: [],\n})\nexport class UsersModule { }\n"],"sourceRoot":"webpack:///"}