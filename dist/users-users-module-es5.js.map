{"version":3,"sources":["webpack:///node_modules/rxjs-compat/Subject.js","webpack:///node_modules/rxjs/Subject.js","webpack:///src/app/pages/users/user/user.component.ts","webpack:///src/app/pages/users/user/user.component.html","webpack:///src/app/pages/users/users-routing.module.ts","webpack:///src/app/pages/users/users.component.ts","webpack:///src/app/pages/users/users.module.ts"],"names":["Object","defineProperty","exports","value","rxjs_1","Subject","__export","m","p","hasOwnProperty","UserFormMode","UserComponent","usersService","router","route","tokenService","userStore","toasterService","fb","unsubscribe$","viewMode","mode","initUserForm","userForm","group","id","control","role","firstName","minLength","maxLength","lastName","login","required","age","min","max","pattern","email","address","street","city","zipCode","snapshot","paramMap","get","isProfile","queryParamMap","setViewMode","EDIT_SELF","loadUser","currentUserId","getUser","toString","EDIT","ADD","getCurrentUser","pipe","subscribe","user","setValue","convertToUser","observable","updateCurrent","result","set","Date","handleSuccessResponse","err","handleWrongResponse","update","create","success","back","danger","navigate","next","complete","VIEW","save","selector","templateUrl","styleUrls","routes","path","component","children","canActivate","UsersRoutingModule","forChild","imports","UsersComponent","template","NB_MODULES","UsersModule","declarations","entryComponents","providers"],"mappings":"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","file":"users-users-module-es5.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar rxjs_1 = require(\"rxjs\");\nexports.Subject = rxjs_1.Subject;\n//# sourceMappingURL=Subject.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"rxjs-compat/Subject\"));\n//# sourceMappingURL=Subject.js.map","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { Subject } from 'rxjs/Subject';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { NbToastrService } from '@nebular/theme';\n\nimport { UserData, User } from '../../../@core/interfaces/common/users';\nimport { EMAIL_PATTERN, NUMBERS_PATTERN } from '../../../@auth/components';\nimport {NbAuthOAuth2JWTToken, NbTokenService} from '@nebular/auth';\nimport {UserStore} from '../../../@core/stores/user.store';\n\nexport enum UserFormMode {\n  VIEW = 'View',\n  EDIT = 'Edit',\n  ADD = 'Add',\n  EDIT_SELF = 'EditSelf',\n}\n\n@Component({\n  selector: 'ngx-user',\n  templateUrl: './user.component.html',\n  styleUrls: ['./user.component.scss'],\n})\nexport class UserComponent implements OnInit, OnDestroy {\n  userForm: FormGroup;\n\n  protected readonly unsubscribe$ = new Subject<void>();\n\n  get firstName() { return this.userForm.get('firstName'); }\n\n  get lastName() { return this.userForm.get('lastName'); }\n\n  get login() { return this.userForm.get('login'); }\n\n  get email() { return this.userForm.get('email'); }\n\n  get age() { return this.userForm.get('age'); }\n\n  get street() { return this.userForm.get('address').get('street'); }\n\n  get city() { return this.userForm.get('address').get('city'); }\n\n  get zipCode() { return this.userForm.get('address').get('zipCode'); }\n\n  mode: UserFormMode;\n  setViewMode(viewMode: UserFormMode) {\n    this.mode = viewMode;\n  }\n\n  constructor(private usersService: UserData,\n              private router: Router,\n              private route: ActivatedRoute,\n              private tokenService: NbTokenService,\n              private userStore: UserStore,\n              private toasterService: NbToastrService,\n              private fb: FormBuilder) {\n  }\n\n  ngOnInit(): void {\n    this.initUserForm();\n    // this.loadUserData();\n  }\n\n  initUserForm() {\n    this.userForm = this.fb.group({\n      id: this.fb.control(''),\n      role: this.fb.control(''),\n      firstName: this.fb.control('', [Validators.minLength(3), Validators.maxLength(20)]),\n      lastName: this.fb.control('', [Validators.minLength(3), Validators.maxLength(20)]),\n      login: this.fb.control('', [Validators.required, Validators.minLength(6), Validators.maxLength(20)]),\n      age: this.fb.control('', [Validators.required, Validators.min(1),\n        Validators.max(120), Validators.pattern(NUMBERS_PATTERN)]),\n      email: this.fb.control('', [\n        Validators.required,\n        Validators.pattern(EMAIL_PATTERN),\n      ]),\n      address: this.fb.group({\n        street: this.fb.control(''),\n        city: this.fb.control(''),\n        zipCode: this.fb.control(''),\n      }),\n    });\n  }\n\n  get canEdit(): boolean {\n    return this.mode !== UserFormMode.VIEW;\n  }\n\n\n  loadUserData() {\n    const id = this.route.snapshot.paramMap.get('id');\n    const isProfile = this.route.snapshot.queryParamMap.get('profile');\n    if (isProfile) {\n      this.setViewMode(UserFormMode.EDIT_SELF);\n      this.loadUser();\n    } else {\n      if (id) {\n        const currentUserId = this.userStore.getUser().id;\n        this.setViewMode(currentUserId.toString() === id ? UserFormMode.EDIT_SELF : UserFormMode.EDIT);\n        this.loadUser(id);\n      } else {\n        this.setViewMode(UserFormMode.ADD);\n      }\n    }\n  }\n\n  loadUser(id?) {\n    const loadUser = this.mode === UserFormMode.EDIT_SELF\n      ? this.usersService.getCurrentUser() : this.usersService.get(id);\n    loadUser\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe((user) => {\n        this.userForm.setValue({\n          id: user.id ? user.id : '',\n          role: user.role ? user.role : '',\n          firstName: user.firstName ? user.firstName : '',\n          lastName: user.lastName ? user.lastName : '',\n          login: user.login ? user.login : '',\n          age: user.age ? user.age : '',\n          email: user.email,\n          address: {\n            street: (user.address && user.address.street) ? user.address.street : '',\n            city: (user.address && user.address.city) ? user.address.city : '',\n            zipCode: (user.address && user.address.zipCode) ? user.address.zipCode : '',\n          },\n        });\n\n        // this is a place for value changes handling\n        // this.userForm.valueChanges.pipe(takeUntil(this.unsubscribe$)).subscribe((value) => {   });\n      });\n  }\n\n\n  convertToUser(value: any): User {\n    const user: User = value;\n    return user;\n  }\n\n  save() {\n    const user: User = this.convertToUser(this.userForm.value);\n\n    let observable = new Observable<User>();\n    if (this.mode === UserFormMode.EDIT_SELF) {\n      this.usersService.updateCurrent(user).subscribe((result: any) => {\n          this.tokenService.set(new NbAuthOAuth2JWTToken(result, 'email', new Date()));\n          this.handleSuccessResponse();\n        },\n        err => {\n          this.handleWrongResponse();\n        });\n    } else {\n      observable = user.id\n        ? this.usersService.update(user)\n        : this.usersService.create(user);\n    }\n\n    observable\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(() => {\n          this.handleSuccessResponse();\n        },\n        err => {\n          this.handleWrongResponse();\n        });\n  }\n\n  handleSuccessResponse() {\n    this.toasterService.success('', `Item ${this.mode === UserFormMode.ADD ? 'created' : 'updated'}!`);\n    this.back();\n  }\n\n  handleWrongResponse() {\n    this.toasterService.danger('', `This email has already taken!`);\n  }\n\n  back() {\n    this.router.navigate(['/pages']);\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n}\n","<!--\n  ~ Copyright (c) Akveo 2019. All Rights Reserved.\n  ~ Licensed under the Single Application / Multi Application License.\n  ~ See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n  -->\n\n<nb-card>\n  <nb-card-header>{{mode}} user</nb-card-header>\n  <nb-card-body>\n    <div [formGroup]=\"userForm\" class=\"container\">\n      <div class=\"form-group\">\n        <label for=\"firstName\">First Name</label>\n        <input nbInput id=\"firstName\" formControlName=\"firstName\"\n               [status]=\"(firstName?.hasError('minlength') || firstName?.hasError('maxlength')) ? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Last Name\">\n        <ngx-validation-message label=\"First Name\"\n                                [showMinLength]=\"firstName?.hasError('minlength')\"\n                                [showMaxLength]=\"firstName?.hasError('maxlength')\" minLength=3\n                                maxLength=20></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"lastName\">Last Name</label>\n        <input nbInput id=\"lastName\" formControlName=\"lastName\"\n               [status]=\"(lastName?.hasError('minlength') || lastName?.hasError('maxlength')) ? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Last Name\">\n        <ngx-validation-message label=\"Last Name\"\n                                [showMinLength]=\"lastName?.hasError('minlength')\"\n                                [showMaxLength]=\"lastName?.hasError('maxlength')\" minLength=3\n                                maxLength=20></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"inputLogin\">Login</label>\n        <input nbInput id=\"inputLogin\" formControlName=\"login\"\n               [status]=\"(login?.errors?.required || login?.hasError('minlength') || login?.hasError('maxlength')) && login.touched ? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Login\">\n        <ngx-validation-message label=\"Login\"\n                                [showMinLength]=\"login?.hasError('minlength')\"\n                                [showMaxLength]=\"login?.hasError('maxlength')\"\n                                [showRequired]=\"login?.errors?.required && login.touched\"\n                                minLength=6\n                                maxLength=20></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"inputAge\">Age</label>\n        <input nbInput id=\"inputAge\" formControlName=\"age\"\n               [status]=\"(age?.errors?.required || age?.errors?.min || age?.errors?.max || age?.hasError('pattern')) && age.touched? 'danger' : 'primary'\"\n               class=\"form-control\" placeholder=\"Age\">\n        <ngx-validation-message label=\"Age\"\n                                [showMin]=\"age?.errors?.min && age.touched\"\n                                [showMax]=\"age?.errors?.max && age.touched\"\n                                [showRequired]=\"age?.errors?.required && age.touched\"\n                                [showPattern]=\"age?.hasError('pattern')\" min=1 max=120></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"inputEmail\">Email</label>\n        <input nbInput id=\"inputEmail\" formControlName=\"email\"\n               [status]=\"(email?.errors?.required || email?.hasError('pattern')) && email.touched ? 'danger' : 'primary'\"\n               class=\"form-control\"\n               placeholder=\"Email\">\n        <ngx-validation-message label=\"Email\"\n                                [showPattern]=\"email?.hasError('pattern') && email.touched\"\n                                [showRequired]=\"email?.errors?.required && email.touched\" min=1 max=120></ngx-validation-message>\n      </div>\n\n      <div class=\"form-group\" formGroupName=\"address\">\n        <label for=\"inputStreet\">Street</label>\n        <input nbInput class=\"form-control\" id=\"inputStreet\" placeholder=\"Street\" formControlName=\"street\">\n      </div>\n\n      <div class=\"form-group\" formGroupName=\"address\">\n        <label for=\"inputCity\">City</label>\n        <input nbInput class=\"form-control\" id=\"inputCity\" placeholder=\"City\" formControlName=\"city\">\n      </div>\n\n      <div class=\"form-group\" formGroupName=\"address\">\n        <label for=\"inputZipCode\">Zip Code</label>\n        <input nbInput class=\"form-control\" id=\"inputZipCode\" placeholder=\"Zip Code\" formControlName=\"zipCode\">\n      </div>\n    </div>\n  </nb-card-body>\n  <nb-card-footer>\n    <button nbButton status=\"primary\" [disabled]=\"!userForm.valid\" (click)=\"save()\" hero>Submit</button>\n    <button nbButton status=\"info\" (click)=\"back()\" hero>Back</button>\n  </nb-card-footer>\n</nb-card>\n\n","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UsersComponent } from './users.component';\nimport { UserComponent } from './user/user.component';\nimport { AdminGuard } from '../../@auth/admin.guard';\n\nconst routes: Routes = [{\n  path: '',\n  component: UsersComponent,\n  children: [\n    {\n      path: 'edit/:id',\n      canActivate: [AdminGuard],\n      component: UserComponent,\n    },\n    {\n      path: 'current',\n      component: UserComponent,\n    },\n    {\n      path: 'add',\n      canActivate: [AdminGuard],\n      component: UserComponent,\n    },\n  ],\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UsersRoutingModule {\n\n}\n","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { Component } from '@angular/core';\n\n\n@Component({\n  selector: 'ngx-users',\n  template: `\n    <router-outlet></router-outlet>\n  `,\n})\nexport class UsersComponent {\n\n}\n","/*\n * Copyright (c) Akveo 2019. All Rights Reserved.\n * Licensed under the Single Application / Multi Application License.\n * See LICENSE_SINGLE_APP / LICENSE_MULTI_APP in the 'docs' folder for license information on type of purchased license.\n */\n\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { Ng2SmartTableModule } from 'ng2-smart-table';\n\nimport { ThemeModule } from '../../@theme/theme.module';\nimport { UsersRoutingModule } from './users-routing.module';\nimport { AuthModule } from '../../@auth/auth.module';\n\n// components\nimport { UsersComponent } from './users.component';\nimport { UserComponent } from './user/user.component';\nimport { ComponentsModule } from '../../@components/components.module';\n// components\n\nimport {\n  NbActionsModule,\n  NbButtonModule,\n  NbCardModule,\n  NbInputModule,\n  NbTabsetModule,\n  NbUserModule,\n  NbRadioModule,\n  NbSelectModule,\n  NbListModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbDatepickerModule,\n} from '@nebular/theme';\n\nconst  NB_MODULES = [\n  NbActionsModule,\n  NbButtonModule,\n  NbCardModule,\n  NbInputModule,\n  NbTabsetModule,\n  NbUserModule,\n  NbRadioModule,\n  NbSelectModule,\n  NbListModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbDatepickerModule,\n  NbInputModule,\n];\n\n@NgModule({\n  imports: [\n    ThemeModule,\n    AuthModule,\n    Ng2SmartTableModule,\n    UsersRoutingModule,\n    ComponentsModule,\n    ReactiveFormsModule,\n    ...NB_MODULES,\n  ],\n  declarations: [\n    UsersComponent,\n    UserComponent,\n  ],\n  entryComponents: [\n  ],\n  providers: [],\n})\nexport class UsersModule { }\n"]}